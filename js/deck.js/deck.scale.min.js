!function(e){var c,s,n=e(document),a=e(window),t=function(){var c=e.deck("getOptions"),n=e.deck("getContainer"),a=c.baseHeight;a||(a=n.height()),e.each(s,function(e,s){var t=s.innerHeight(),l=s.find("."+c.classes.scaleSlideWrapper),i=n.hasClass(c.classes.scale),d=i?a/t:1;1===d?l.css("transform",""):(l.css("transform","scale("+d+")"),window.setTimeout(function(){n.scrollTop(0)},1))})},l=function(){var c=e.deck("getOptions"),n=e.map([c.classes.before,c.classes.previous,c.classes.current,c.classes.next,c.classes.after],function(e){return"."+e}).join(", ");s=[],e.each(e.deck("getSlides"),function(e,a){var t=a.parentsUntil(c.selectors.container,n);t.length||s.push(a)})},i=function(){var c=e.deck("getOptions"),n='<div class="'+c.classes.scaleSlideWrapper+'"/>';e.each(s,function(e,c){c.children().wrapAll(n)})},d=function(){var s=e.deck("getOptions");a.unbind("resize.deckscale"),a.bind("resize.deckscale",function(){window.clearTimeout(c),c=window.setTimeout(t,s.scaleDebounce)}),e.deck("enableScale"),a.unbind("load.deckscale"),a.bind("load.deckscale",t)},o=function(){var c=e.deck("getOptions");n.unbind("keydown.deckscale"),n.bind("keydown.deckscale",function(s){var n=s.which===c.keys.scale;n=n||e.inArray(s.which,c.keys.scale)>-1,n&&(e.deck("toggleScale"),s.preventDefault())})};e.extend(!0,e.deck.defaults,{classes:{scale:"deck-scale",scaleSlideWrapper:"deck-slide-scaler"},keys:{scale:83},baseHeight:null,scaleDebounce:200}),e.deck("extend","disableScale",function(){e.deck("getContainer").removeClass(e.deck("getOptions").classes.scale),t()}),e.deck("extend","enableScale",function(){e.deck("getContainer").addClass(e.deck("getOptions").classes.scale),t()}),e.deck("extend","toggleScale",function(){var c=e.deck("getContainer"),s=c.hasClass(e.deck("getOptions").classes.scale);e.deck(s?"disableScale":"enableScale")}),n.bind("deck.init",function(){l(),i(),d(),o()})}(jQuery,"deck",this);